# categories_comparison_test

Проект состоит из трех частей: 
Парсер Магнита, реализован через апи-запросы, напрямую к источнику (magnit_parser.py)
Парсер Перекрестка. Собирает данные с сайта, читая html. Реализован retry для проблем с доступом и мультипроцессинг (perekrestok_parser.py)
UI для вывода результата и активации парсера. Сильно сырой, но работает. (categories_comparison.py)
Сопоставление категорий было реализовано как напрямую, так и через вероятности схожести. Иногда встречаются дублирующиеся категории. К примеру, у магнита множество категорий “Игрушки”, которые мапятся с одной категорией “Игрушки” у перекрестка. Многие категории не сопоставлены.

Прошу учесть, что код весьма сырой, но так как задание тестовое, я не стал углубляться в детали, а лишь набросал общую структуру и сделал более-менее готовое решение. 
Как запустить:
Переходим в папку
Активируем source venv/bin/activate
Устанавливаем зависимости pip install -r requirements.txt
Запускаем файл python3 categories_comparison.py
Переходим на локальный сервер, по умолчанию http://127.0.0.1:1313/
В фильтрах можно выбрать определенную категорию. Работает только для одного из магазинов, оба сразу выбрать не получится. Можно выбрать фильтры по цене
При нажатии на кнопку Scrape активируется парсер. Время работы - около 5 мин. Статус не отображается, но можно посмотреть в консоле. Когда перестанут сыпаться сообщения - процесс парсинга закончен



Что нужно улучшить для реального проекта (как минимум):
Сопоставление единиц измерений (пр: 930мл превратить в 1000мл, сделать соответствующий перерасчет)
Точно определить локацию, по которой будет сделано сопоставление
Доделать\настроить маппинг категорий
Добавить больше обработок ошибок 
Статус парсинга
Обновление данных в таблице после парсинга (сейчас для этого нужно перезапустить скрипт после парсинга)
Рассмотреть вариант подключения напрямую к источнику, а не парсинга сайта, для перекрестка(даже если нет публичного апи, почти всегда можно вытащить данные из источника, как это сделано с магнитом)
Настроить фильтры, привести в нормальный вид UI


